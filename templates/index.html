<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICU Real-Time Monitor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #f4f6f9; }
        .navbar { background-color: #2a9d8f; }
        .navbar-brand { color: white; font-weight: bold; }
        .card { border-radius: 10px; box-shadow: 0px 2px 10px rgba(0,0,0,0.1); }
        .alert-card { color: white; font-weight: bold; border-radius: 10px; padding: 15px; text-align: center; }
        .feedback-box { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
        .submit-btn { background-color: #2a9d8f; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .submit-btn:hover { background-color: #21867a; }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">üè• Real-Time ICU Monitor</a>
        </div>
    </nav>

    <div class="container">
        <!-- Patient Selection -->
        <div class="mb-4">
            <label for="patientSelect" class="form-label">Select Patient:</label>
            <select id="patientSelect" class="form-select">
                <option value="">-- Select Patient --</option>
            </select>
        </div>

        <!-- Metrics Cards -->
        <div class="row mb-4" id="metricsRow">
            <div class="col-md-3">
                <div class="card text-center p-3">
                    <h5>Heart Rate</h5>
                    <h3 id="heartRate">--</h3>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center p-3">
                    <h5>Oxygen Level</h5>
                    <h3 id="oxygenLevel">--</h3>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center p-3">
                    <h5>Blood Pressure</h5>
                    <h3 id="bloodPressure">--</h3>
                </div>
            </div>
            <div class="col-md-3">
                <div class="alert-card bg-success" id="statusCard">‚úÖ Safe</div>
            </div>
        </div>

        <!-- Chart -->
        <div class="mb-4">
            <div id="vitalsChart" style="height:400px;"></div>
        </div>

        <!-- Feedback -->
        <div class="mb-4">
            <label for="feedback" class="form-label">Feedback / Notes:</label>
            <textarea id="feedback" class="feedback-box" placeholder="Enter notes..."></textarea>
            <button class="submit-btn mt-2" onclick="submitFeedback()">Submit Feedback</button>
        </div>
    </div>

    <script>
        // Sample function to update metrics
        function updateMetrics(hr, ox, bp, status) {
            document.getElementById("heartRate").innerText = hr + " bpm";
            document.getElementById("oxygenLevel").innerText = ox + " %";
            document.getElementById("bloodPressure").innerText = bp + " mmHg";

            const statusCard = document.getElementById("statusCard");
            if(status === "ALERT") {
                statusCard.innerText = "‚ö†Ô∏è ALERT!";
                statusCard.classList.remove("bg-success");
                statusCard.classList.add("bg-danger");
            } else {
                statusCard.innerText = "‚úÖ Safe";
                statusCard.classList.remove("bg-danger");
                statusCard.classList.add("bg-success");
            }
        }

        // Sample function to plot chart
        function plotVitals(timestamps, heartRates, oxygenLevels, bloodPressures) {
            const trace1 = { x: timestamps, y: heartRates, type: 'scatter', name: 'Heart Rate' };
            const trace2 = { x: timestamps, y: oxygenLevels, type: 'scatter', name: 'Oxygen Level' };
            const trace3 = { x: timestamps, y: bloodPressures, type: 'scatter', name: 'Blood Pressure' };
            const layout = { title: 'Vitals Over Time', margin: { t: 50 } };
            Plotly.newPlot('vitalsChart', [trace1, trace2, trace3], layout);
        }

        function submitFeedback() {
            const feedback = document.getElementById("feedback").value;
            if(feedback.trim() === "") {
                alert("Please enter feedback before submitting.");
                return;
            }
            alert("Feedback submitted: " + feedback);
            document.getElementById("feedback").value = "";
        }

        // TODO: Integrate with backend API to fetch patient vitals in real-time
    </script>
</body>
</html>
